<% if (success_msg.length > 0) { %>
<div class="alert alert-success" id="success-alert"><%= success_msg %></div>
<% } %>

<!-- Carousel Start -->
<div class="container-fluid p-0">
  <div class="owl-carousel header-carousel position-relative">
    <% if (events.length > 0) { %> <% events.forEach(event => { %>
    <div class="owl-carousel-item position-relative">
      <img src="<%= event.image_url %>" alt="Event Image" />
      <div
        class="position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center"
        style="background: rgba(43, 57, 64, 0.5)"
      >
        <div class="container">
          <div class="row justify-content-start">
            <div class="col-10 col-lg-8">
              <h1 class="display-3 text-white animated slideInDown mb-4">
                <%= event.titre %>
              </h1>
              <p class="fs-5 fw-medium text-white mb-4 pb-2">
                <%= event.apercu %>
              </p>
              <a
                href="/event/<%=event.id%>"
                class="btn btn-primary py-md-3 px-md-5 me-3 animated slideInLeft"
              >
                Participer
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
    <% }); %> <% } %>
  </div>
</div>

<!-- Category Start -->
<div class="container-xxl py-5">
  <div class="container">
    <h1 class="text-center mb-5 wow fadeInUp" data-wow-delay="0.1s">Apercu</h1>
    <p style="text-align: center">
      Lorem ipsum dolor sit amet consectetur adipisicing elit. Minima tempora
      cum aspernatur commodi iste ipsum, repudiandae amet quidem est. Recusandae
      veniam alias inventore. Voluptas officia iste ea, error saepe ratione.
    </p>
    <% 
    const apercu = [
        "Salon des Tracteurs: Nouveaux modèles et technologies de tracteurs.",
        "Journée du Laboratoire: Innovations technologiques en recherche agricole.",
        "Démonstration de Turbines: Présentation des turbines agricoles avancées.",
        "Exposition des Machines à Olives: Équipements modernes pour la récolte des olives.",
        "Atelier Drones en Agriculture: Utilisation des drones pour optimiser les cultures.",
        "Séminaire Culture en Laboratoire: Techniques et technologies en culture contrôlée.",
        "Lancement du Site Web: Nouvelle plateforme interactive pour la mécanisation durable.",
        "Forum Technologies Agricoles: Discussion sur les dernières avancées technologiques en agriculture."
    ];
%>
<div class="row g-4">
  <% if (events.length > 0) { %> 
    <% events.forEach((event,i) => { %>
    <div class="col-lg-3 col-sm-6 wow fadeInUp" data-wow-delay="0.1s">
      <div class="image-container">
        <img style="width: 100%; height: 180px;" src="<%= event.image_url %>" class="cat-item rounded p-1" alt="">
        <div class="hover-text">
          <p><%= apercu[i] %></p>
        </div>
      </div>
    </div>
    <% }); %> 
  <% } %>
</div>
  </div>
</div>
<!-- Category End -->

<!-- news Start -->
<div class="container-xxl py-5 wow fadeInUp" data-wow-delay="0.1s">
  <div class="container">
    <h1 class="text-center mb-5">Actualités</h1>
    <div class="owl-carousel testimonial-carousel">
      <% if (news.length > 0) { %> <% news.forEach(item => { %>
      <div class="testimonial-item bg-light rounded p-4">
        <img
          class="img-fluid flex-shrink-0 rounded"
          src="<%= item.imageUrl %>"
          style="width: 50px; height: 50px"
        />
        <h5 class="mb-1"><%= item.title %></h5>
        <p><%= item.description %></p>
        <div class="d-flex align-items-center">
          <div class="ps-3">
            <small><%= item.date %></small>
          </div>
        </div>
      </div>
      <% }); %> <% } %>
    </div>
  </div>
</div>
<!-- news End -->

<!-- Jobs Start -->
<div class="container-xxl py-5" id="evenements">
  <div class="container">
    <h1 class="text-center mb-5 wow fadeInUp" data-wow-delay="0.1s">
      Evenements
    </h1>
    <div class="tab-class text-center wow fadeInUp" data-wow-delay="0.3s">
      <div class="tab-content">
        <div i class="tab-pane fade show p-0 active">
          <% if (events.length > 0) { %> <% events.forEach(event => { %>
          <div class="job-item p-4 mb-4">
            <div class="row g-4">
              <div class="col-sm-12 col-md-8 d-flex align-items-center">
                <img
                  class="flex-shrink-0 img-fluid border rounded"
                  src="<%= event.image_url %>"
                  alt=""
                  style="width: 80px; height: 80px"
                />
                <div class="text-start ps-4">
                  <h5 class="mb-3"><%= event.titre %></h5>
                  <p><%= event.apercu %></p>
                  <span class="text-truncate me-3"
                    ><i class="fa fa-map-marker-alt text-primary me-2"></i
                    ><%=event.lieu%></span
                  >
                  <span class="text-truncate me-3"
                    ><i class="far fa-clock text-primary me-2"></i
                    ><%=event.time%></span
                  >
                </div>
              </div>
              <div
                class="col-sm-12 col-md-4 d-flex flex-column align-items-start align-items-md-end justify-content-center"
              >
                <div class="d-flex mb-3">
                  <a class="btn btn-light btn-square me-3" href=""
                    ><i class="far fa-heart text-primary"></i
                  ></a>
                  <a class="btn btn-primary" href="<%= `/event/${event.id}`%>"
                    >Participer</a
                  >
                </div>
                <small class="text-truncate"
                  ><i class="far fa-calendar-alt text-primary me-2"></i>Date :
                  <%= event.date_debut.toDateString() %></small
                >
              </div>
            </div>
          </div>
          <% }) %> <% } else { %>
          <p>No events available.</p>
          <% } %>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Jobs End -->



<!-- Back to Top -->
<a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top"
  ><i class="bi bi-arrow-up"></i
></a>

<script>
  // Function to remove alert after 5 seconds
  function autoHideAlert() {
    const alert = document.getElementById("success-alert");
    if (alert) {
      setTimeout(() => {
        alert.style.opacity = "0";
        setTimeout(() => alert.remove(), 500); // Remove from DOM after fade out
      }, 5000); // 5 seconds
    }
  }

  // Run the function when the page loads
  document.addEventListener("DOMContentLoaded", autoHideAlert);
</script>
