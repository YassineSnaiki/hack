<div class="container-xxl py-5">
  <div class="container">
    <h1 class="text-center mb-5 wow fadeInUp" data-wow-delay="0.1s">
      Evenement
    </h1>
    <div class="tab-class text-center wow fadeInUp" data-wow-delay="0.3s">
      <div class="tab-content">
        <div class="row g-4">
          <div class="job-item p-4 mb-4">
            <form
              action="/modifyevent/<%= event.id %>?_method=PATCH"
              method="POST"
              enctype="multipart/form-data"
            >
              <div class="row g-4">
                <div
                  class="col-sm-12 col-md-8 align-items-center"
                  style="width: 100%"
                >
                  <div class="d-flex align-items-center">
                    <div class="text-start ps-4">
                      <div class="mb-3" style="display: flex">
                        <label
                          for="titre_<%= event.id %>"
                          class="form-label"
                          style="flex-basis: 40%"
                          >Titre:</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="titre_<%= event.id %>"
                          name="titre"
                          value="<%= event.titre %>"
                          required
                        />
                      </div>
                      <div class="mb-3" style="display: flex">
                        <label
                          for="apercu_<%= event.id %>"
                          class="form-label"
                          style="flex-basis: 40%"
                          >Apercu:</label
                        >
                        <textarea
                          class="form-control"
                          id="apercu_<%= event.id %>"
                          name="apercu"
                          required
                        >
            <%= event.apercu %></textarea
                        >
                      </div>
                      <div class="mb-3" style="display: flex">
                        <label
                          for="description_<%= event.id %>"
                          class="form-label"
                          style="flex-basis: 40%"
                          >Description:</label
                        >
                        <textarea
                          class="form-control"
                          id="description_<%= event.id %>"
                          name="description"
                        >
            <%= event.description %></textarea
                        >
                      </div>
                      <div
                        class="mb-3 inputsAndImage"
                        style="display: flex; justify-content: space-between"
                      >
                        <div>
                          <input
                            type="file"
                            class="form-control"
                            id="image_url_<%= event.id %>"
                            name="image_url"
                          />
                          <div>
                            <small
                              class="text-truncate"
                              style="
                                display: flex;
                                flex-direction: column;
                                align-items: flex-start;
                              "
                            >
                              <i
                                class="far fa-calendar-alt text-primary me-2"
                              ></i
                              >Debut:
                              <input
                                type="date"
                                class="form-control"
                                name="date_debut"
                                value="<%= new Date(event.date_debut).toISOString().split('T')[0] %>"
                                required
                              />
                            </small>
                            <small
                              class="text-truncate"
                              style="
                                display: flex;
                                flex-direction: column;
                                align-items: flex-start;
                              "
                            >
                              <i
                                class="far fa-calendar-alt text-primary me-2"
                              ></i
                              >Fin:
                              <input
                                type="date"
                                class="form-control"
                                name="date_fin"
                                value="<%= event.date_fin ? new Date(event.date_fin).toISOString().split('T')[0] : '' %>"
                              />
                            </small>
                            <small
                              class="text-truncate"
                              style="
                                display: flex;
                                flex-direction: column;
                                align-items: flex-start;
                              "
                            >
                              <i class="far fa-clock text-primary me-2"></i
                              >Heure:
                              <input
                                type="time"
                                class="form-control"
                                name="time"
                                value="<%= event.time %>"
                              />
                            </small>
                            <small
                              class="text-truncate"
                              style="
                                display: flex;
                                flex-direction: column;
                                align-items: flex-start;
                              "
                            >
                              <i
                                class="fa fa-map-marker-alt text-primary me-2"
                              ></i
                              >Lieu:
                              <input
                                type="text"
                                class="form-control"
                                name="lieu"
                                value="<%= event.lieu %>"
                                required
                              />
                            </small>
                          </div>
                        </div>
                        <input
                          type="hidden"
                          name="existing_image"
                          value="<%= event.image_url %>"
                        />

                        <img
                          src="<%= event.image_url %>"
                          alt="Event Image"
                          style="width: 50%"
                        />
                      </div>
                    </div>
                  </div>
                </div>

                <!-- </div> -->
                <div class="d-flex mt-3" style="gap: 30px; align-items: center">
                  <button type="submit" class="btn btn-primary">
                    Modifier
                  </button>
                </div>
              </div>
            </form>

            <!-- Separate delete form -->
            <form
              action="/deleteevent/<%= event.id %>?_method=DELETE"
              method="POST"
              onsubmit="return confirm('Are you sure you want to delete this event?');"
            >
              <button
                type="submit"
                class="btn btn-danger mt-3"
                style="width: fit-content"
              >
                Supprimer
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
